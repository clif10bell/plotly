---
title: "Coursera Data Products Week 3 Project"
author: "Clifton Bell"
date: "`r Sys.Date()`"
output: ioslides_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

```{r, echo = FALSE, warning = FALSE, results = 'hide', message = FALSE}
suppressPackageStartupMessages(library(dplyr))
library(plotly)
library(here)
library(readr)
library(knitr)
library(kableExtra)
```

## Teacher Licensure in Virginia, USA

- In Virginia, public school teachers must be licensed
- However, some teachers only hold a temporary provisional license
- Question: Do schools with higher percentages of provisionally-licensed teaches have lower test scores?

## Data Sources

- Virginia Department of Education data for school year 2021-2022
- https://www.kaggle.com/datasets/zsetash/virginia-public-schools?resource=download
- Variables of interest for each school
    * Standards of Learning (SOL) passing rates
    * Percentage of provisionally licensed teachers
    * School poverty level

## Passing Rates Decrease with Increasing Provisional Licensure and Poverty 

```{r plot, echo = FALSE, message = FALSE, warning = FALSE}

# Read data

SOL_Pass_Rate <- read.csv(here("Testing","SOL_Pass_Rate.csv"))

Teacher_Licensure <- read.csv(here("Teachers","Licensure.csv"))

# Merge data based on school

data <- merge(SOL_Pass_Rate, Teacher_Licensure, by = "School")

data$Poverty_Level <- factor(data$Poverty_Level, levels = c("High Poverty", "Medium Poverty", "Low Poverty"))

# Plot the SOL pass rate versus percent of provisional licenses, color coded by
# school poverty category

plot <- plot_ly(data, x = ~Provisional_Percent, y = ~SOL.Pass.Rate,
                color = ~Poverty_Level, type = "scatter", mode = "markers")

plot <- plot %>%
  layout(
    xaxis = list(title = "Teachers with a Provisional License (%)"),
    yaxis = list(title = "Standards of Learning Pass Rate (%)")
  )

plot

```

## ANOVA: Both Licensure and Poverty Level Are Significant

```{r ANOVA, echo = FALSE, message = FALSE, warning = FALSE}
anova1 <- aov(SOL.Pass.Rate ~ Poverty_Level * Provisional_Percent, data = data)

anova_table <- as.data.frame(summary(anova1)[[1]])

# Format the data frame as a table
kable(anova_table, format = "html", caption = "ANOVA Test Results") %>%
  kable_styling(bootstrap_options = "striped", full_width = FALSE, font_size = 14) %>%
  column_spec(1:5, width = "20%") %>%
  scroll_box(width = "100%", height = "400px")
```

